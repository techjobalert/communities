.fl-l{:style => "width:900px"}
  .b-recorder
    #inscription.b-recorder__player
    .b-recorder__tools
      = link_to 'Movie Play', '#', :class => 'link mv-play'
      = link_to 'Movie Pause', '#', :class => 'link mv-pause noactive'
      = link_to 'Movie Stop', '#', :class => 'link mv-stop noactive' 
      = link_to 'Record Start', '#', :class => 'link rec-start'
      = link_to 'Record Stop', '#', :class => 'link rec-stop noactive'
      = link_to 'Record Save', '#', :class => 'link rec-save'

  
  .b-upload-item
    .b-upload-item__title.hr Choose thumbnail

  .b-upload-item__presenter-video

    = label_tag "pos_br", "" do
      = radio_button_tag "pos", "br", true, :title => "bottom right"
      = image_tag "video/presenter-video-rb.jpg"

    = label_tag "pos_tl", "" do
      = radio_button_tag "pos", "tl", false, :title => "top left"
      = image_tag "video/presenter-video-lt.jpg"

    = label_tag "pos_mr", "" do
      = radio_button_tag "pos", "mr", false, :title => "middle right"
      = image_tag "video/presenter-video-r.jpg"

    = label_tag "pos_ml", "" do
      = radio_button_tag "pos", "ml", false, :title => "middle left"
      = image_tag "video/presenter-video-l.jpg"

:javascript
    var ins;
    var fileName = Inscription.filename();
    var playbackPoints = [];

    $(function(){

          ins = Inscription.run({
            container: 'inscription',
            player: {
                resource: "#{secure_link( @a_video,  @a_video.file.mp4.url())}",
                server: 'rtmp://89.209.76.243'
            }
        });

        ins.on('load', function() {
            setTimeout(function() {
                var points = Inscription.Point.read('00:00:13,290;00:00:17,581;00:00:18,873;00:00:21,663;00:00:23,955;00:00:35,245;00:00:54,245');

                _.each(points, function(point) {
                    ins.point.add(point);                    
                });

                $('.b-recorder__tools').fadeIn();
            }, 5000);
        });

        var callback = function() {
            console.log(arguments);
        }

        ins.on('play', callback);
        ins.on('stop', callback);
        ins.on('pause', callback);
        ins.on('tick', callback);

        var recordStop = function(){
          var data = {  video_id: "#{@a_video.id}",
                      record_file_name: fileName,
                      playback_points: playbackPoints,
                      position: $("input[type=radio]:checked").val()};
          $.ajax({
            url: "#{item_merge_presenter_video_url(@item)}",
            type: "POST",
            dataType: "json",
            data: data,
            success: function(data){
              eval(data);
            }
          });
        }

        $(document)
          .on('click', '.rec-start', function(){
            ins.record.start(fileName);
            $('.rec-start').addClass('noactive');
            $('.rec-stop').removeClass('noactive');
            return false;
          })

          .on('click', '.rec-stop', function(){
            ins.record.stop();
            $('.rec-stop').addClass('noactive');
            $('.rec-start').removeClass('noactive');
            return false;
          })

          .on('click', '.rec-save', recordStop)

          .on('click', '.mv-play', function(){
            ins.movie.play();
            $('.mv-play').addClass('noactive');
            $('.mv-stop').removeClass('noactive');
            $('.mv-pause').removeClass('noactive');
            return false;
          })

          .on('click', '.mv-pause', function(){
            ins.movie.pause();
            $('.mv-pause').addClass('noactive');
            $('.mv-play').removeClass('noactive');
            return false;
          })

          .on('click', '.mv-stop', function(){
            ins.movie.stop();
            $('.mv-pause').addClass('noactive');
            $('.rec-stop').addClass('noactive');
            $('.mv-play').removeClass('noactive');
            
            return false;
          });


    });

    


