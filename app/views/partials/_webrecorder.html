<div style="width:320px;height:320px;">
  <object id="recorder" width="100%" height="100%">
      <param name="movie" value="/assets/WebcamRecorderApp.swf" />
      <param name="quality" value="high" />
      <param name="bgcolor" value="#ffffff" />
      <param name="allowScriptAccess" value="always" />
      <param name ="flashVars" value="recordingMode=video&serverURL=rtmp://62.75.189.166/&jsListener=jsListener&height=600&width=600" />
      <embed name="recorder" src="/assets/WebcamRecorderApp.swf"
        quality="high" bgcolor="#ffffff"
        width="100%" height="100%"
        play="true"
        loop="false"
        quality="high"
        allowScriptAccess="always"
        type="application/x-shockwave-flash"
        flashVars="recordingMode=video&serverURL=rtmp://62.75.189.166/&jsListener=jsListener"
        pluginspage="http://www.adobe.com/go/getflashplayer">
      </embed>
  </object>
</div>

<script type="text/javascript">
  var recordind = false,
      recordingFileName,
      recorder = document.getElementById("recorder"),
      jsListener = function( type, arguments ) {
        console.debug( type + ":" + arguments );
      };

  var startRecord = function(fileName){
    if(!fileName) {
      var _date = new Date();
      var today = [_date.getDate(), _date.getMonth()+1, _date.getFullYear(), _date.getTime()].join("-");
      recordingFileName = today+"_webcamvideo.mp4";
      console.log("filename autogenerated: "+recordingFileName);
      recordind = true;
    }
    else{
      recordingFileName = fileName;
    }

    recorder.record(recordingFileName);
    document.getElementById("recorder-stop-start").innerHTML = "Stop record";
    document.getElementById("recorder-status").innerHTML = "Recording..";
  }
  var stopRecord = function(){
    recorder.stopRecording();
    document.getElementById("recorder-stop-start").innerHTML = "Start record";
    document.getElementById("recorder-status").innerHTML = "";
    recordind = false;
  }
</script>