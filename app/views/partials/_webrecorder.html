<div id="recorder" style="width:250px;height:250px;float:left;margin-bottom:30px;bottom: 0;z-index: 1;position: absolute;right: 0;">
  <object id="recorder" width="100%" height="100%">
      <param name="movie" value="/assets/WebcamRecorderApp.swf" />
      <param name="quality" value="high" />
      <param name="bgcolor" value="#ffffff" />
      <param name="allowScriptAccess" value="always" />
      <param name ="flashVars" value="recordingMode=video&serverURL=rtmp://89.209.76.243/&jsListener=jsListener&height=600&width=600" />
      <embed name="recorder" src="/assets/WebcamRecorderApp.swf"
        quality="high" bgcolor="#ffffff"
        width="100%" height="100%"
        play="true"
        loop="false"
        quality="high"
        allowScriptAccess="always"
        type="application/x-shockwave-flash"
        flashVars="recordingMode=video&serverURL=rtmp://89.209.76.243/&jsListener=jsListener"
        pluginspage="http://www.adobe.com/go/getflashplayer">
      </embed>
  </object>
</div>

<script type="text/javascript">
  var recordind = false,
      recordingFileName,
      recorder = document.recorder,
      jsListener = function( type, arguments ) {
        console.debug( type + ":" + arguments );
      },
      uuid = '<%= uuid %>';

  var startRecord = function(fileName){
    if(!fileName) {
      var _date = new Date();
      var today = [uuid, _date.getDate(), _date.getMonth()+1, _date.getFullYear()].join("-");
      recordingFileName = today+"-webcamvideo.flv";
      console.log("filename autogenerated: "+recordingFileName);
      recordind = true;
    }
    else{
      recordingFileName = fileName;
    }

    recorder.record(recordingFileName);
    document.getElementById("recorder-stop-start").innerHTML = "Stop record";
    document.getElementById("recorder-status").innerHTML = "Recording..";
  }
  var stopRecord = function(){
    recorder.stopRecording();
    document.getElementById("recorder-stop-start").innerHTML = "Start record";
    document.getElementById("recorder-status").innerHTML = "";
    recordind = false;
  }
</script>
